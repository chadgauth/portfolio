---
import BaseLayout from "../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";
import ProfileImage from "../components/ProfileImage.astro";
import profileImage from "../assets/chad_profile_new.png";

// Get recent blog posts
const posts = (await getCollection('blog')).sort(
  (a, b) => new Date(b.data.pubDate).valueOf() - new Date(a.data.pubDate).valueOf()
).slice(0, 3);
---

<BaseLayout sideBarActiveItemID="home" title="Chad Gauthier - Software Engineer & Digital Innovator">
  <!-- Hero Section with Floating Elements -->
  <div class="relative min-h-screen overflow-hidden">
    <!-- Animated Background -->
    <div class="absolute inset-0" style="background: linear-gradient(135deg, oklch(0.15 0.02 240), oklch(0.13 0.02 250), oklch(0.15 0.02 240));">
      <div class="absolute inset-0" style="background: radial-gradient(circle at 20% 80%, oklch(0.85 0.15 180 / 0.12) 0%, transparent 50%);"></div>
      <div class="absolute inset-0" style="background: radial-gradient(circle at 80% 20%, oklch(0.8 0.18 200 / 0.12) 0%, transparent 50%);"></div>
      <div class="absolute inset-0" style="background: radial-gradient(circle at 40% 40%, oklch(0.82 0.16 260 / 0.12) 0%, transparent 50%);"></div>
    </div>

    <!-- Floating Geometric Shapes -->
    <div class="absolute inset-0 overflow-hidden pointer-events-none">
      <div class="floating-shape shape-1 absolute w-16 h-16 border border-cyan-500/30 rounded-lg"></div>
      <div class="floating-shape shape-2 absolute w-12 h-12 border border-blue-500/30 rounded-full"></div>
      <div class="floating-shape shape-3 absolute w-20 h-20 border border-purple-500/30 rounded-lg rotate-45"></div>
      <div class="floating-shape shape-4 absolute w-8 h-8 bg-cyan-500/20 rounded-full"></div>
      <div class="floating-shape shape-5 absolute w-24 h-24 border border-green-500/30 rounded-lg rotate-12"></div>
    </div>

    <!-- Main Content -->
    <div class="relative z-10 container mx-auto px-4 py-8 md:py-20">
      <div class="grid lg:grid-cols-2 gap-8 md:gap-16 items-center min-h-screen">
        
        <!-- Left Side - Hero Content -->
        <div class="space-y-6 md:space-y-8 fade-in-up">
          <div class="space-y-3 md:space-y-4">
            <div class="text-lg text-cyan-400 font-mono tracking-wider">
              > Hello, World! I'm
            </div>
            <h1 class="text-6xl lg:text-7xl font-bold bg-gradient-to-r from-cyan-400 via-blue-500 to-purple-500 bg-clip-text text-transparent leading-tight">
              Chad<span class="text-white">.</span>
            </h1>
            <h2 class="text-2xl lg:text-3xl text-gray-300 font-light">
              Software Engineer & Digital Innovator
            </h2>
          </div>

          <p class="text-xl text-gray-400 leading-relaxed max-w-lg">
            Transforming ideas into elegant code solutions. Passionate about AI, web technologies, 
            and creating digital experiences that make a difference.
          </p>

          <div class="flex flex-wrap gap-4">
            <a href="/cv" class="cyber-button-primary group">
              <span class="relative z-10">View My CV</span>
              <div class="absolute inset-0 bg-gradient-to-r from-cyan-600 to-blue-600 opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-lg"></div>
            </a>
            <a href="/blog" class="cyber-button-secondary">
              <span>Read My Blog</span>
            </a>
            <button onclick="openContactModal()" class="cyber-button-outline">
              <span>Get In Touch</span>
            </button>
          </div>

          <!-- Tech Stack Icons -->
          <div class="pt-8">
            <div class="text-sm text-gray-500 mb-4 font-mono">// Tech Stack</div>
            <div class="flex flex-wrap gap-4">
              <div class="tech-badge">JavaScript</div>
              <div class="tech-badge">TypeScript</div>
              <div class="tech-badge">React</div>
              <div class="tech-badge">Node.js</div>
              <div class="tech-badge">Python</div>
              <div class="tech-badge">AI/ML</div>
            </div>
          </div>
        </div>

        <!-- Right Side - Profile & Stats -->
        <div class="relative fade-in-right">
          <div class="relative z-10 max-w-md mx-auto lg:mx-0">
            <!-- Profile Card -->
            <div class="bg-gray-800/50 backdrop-blur-xl border border-gray-700/50 rounded-2xl p-8 shadow-2xl">
              <div class="relative mb-6">
                <div class="w-48 h-48 mx-auto relative">
                  <div class="absolute inset-0 bg-gradient-to-r from-cyan-500 to-blue-500 rounded-full animate-pulse opacity-75"></div>
                  <div class="relative w-full h-full rounded-full overflow-hidden border-4 border-gray-700">
                    <ProfileImage profileImage={profileImage} altText="Chad Gauthier" />
                  </div>
                </div>
              </div>
              
              <!-- Quick Stats -->
              <div class="grid grid-cols-3 gap-4 text-center">
                <div class="space-y-1">
                  <div class="text-2xl font-bold text-cyan-400">{posts.length}+</div>
                  <div class="text-xs text-gray-400">Blog Posts</div>
                </div>
                <div class="space-y-1">
                  <div class="text-2xl font-bold text-blue-400">10+</div>
                  <div class="text-xs text-gray-400">Years Exp</div>
                </div>
                <div class="space-y-1">
                  <div class="text-2xl font-bold text-purple-400">âˆž</div>
                  <div class="text-xs text-gray-400">Passion</div>
                </div>
              </div>

              <!-- Latest Blog Link -->
              {posts.length > 0 && (
                <div class="mt-6 pt-6 border-t border-gray-700/50">
                  <div class="text-sm text-gray-400 mb-2">Latest Post:</div>
                  <a href={`/blog/${posts[0].slug}`} class="block p-3 rounded-lg bg-gray-800/30 border border-gray-700/30 hover:border-cyan-500/50 transition-all duration-200 group">
                    <div class="text-sm font-medium text-cyan-400 group-hover:text-cyan-300 line-clamp-1">
                      {posts[0].data.title}
                    </div>
                    <div class="text-xs text-gray-500 mt-1">
                      {new Date(posts[0].data.pubDate).toLocaleDateString()}
                    </div>
                  </a>
                </div>
              )}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Enhanced Blog Slider Section -->
  <section class="relative py-20 bg-gray-900/50">
    <div class="container mx-auto px-4">
      <!-- Section Header -->
      <div class="text-center mb-16 fade-in-up">
        <h2 class="text-4xl lg:text-5xl font-bold mb-4">
          <span class="bg-gradient-to-r from-cyan-400 to-blue-500 bg-clip-text text-transparent">
            Latest Insights
          </span>
        </h2>
        <p class="text-xl text-gray-400 max-w-2xl mx-auto">
          Exploring the intersection of technology, innovation, and creative problem-solving
        </p>
      </div>

      <!-- Blog Slider -->
      <div class="relative max-w-6xl mx-auto">
        <div class="blog-slider overflow-hidden rounded-2xl">
          <div class="blog-slides flex transition-transform duration-500 ease-in-out">
            {posts.map((post, index) => (
              <div class="blog-slide w-full flex-shrink-0" data-index={index}>
                <div class="relative h-96 lg:h-[500px] overflow-hidden bg-gradient-to-br from-gray-800 to-gray-900 rounded-2xl border border-gray-700/50">
                  
                  <!-- Background Image -->
                  {post.data.heroImage && (
                    <div class="absolute inset-0">
                      <img
                        src={post.data.heroImage}
                        alt={post.data.title}
                        class="w-full h-full object-cover opacity-20"
                        transition:name={`hero-${post.slug}`}
                      />
                      <div class="absolute inset-0 bg-gradient-to-t from-gray-900 via-gray-900/70 to-transparent"></div>
                    </div>
                  )}
                  
                  <!-- Content -->
                  <div class="relative z-10 h-full flex flex-col justify-end p-8 lg:p-12">
                    <div class="space-y-4">
                      <div class="flex items-center gap-4 text-sm text-gray-400">
                        <time>{new Date(post.data.pubDate).toLocaleDateString('en-US', {
                          year: 'numeric',
                          month: 'long',
                          day: 'numeric',
                        })}</time>
                        <span class="w-1 h-1 bg-gray-400 rounded-full"></span>
                        <span class="text-cyan-400">Engineering</span>
                      </div>
                      
                      <h3 class="text-2xl lg:text-4xl font-bold text-white leading-tight line-clamp-2">
                        {post.data.title}
                      </h3>
                      
                      <p class="text-gray-300 text-lg leading-relaxed line-clamp-3">
                        {post.data.description}
                      </p>
                      
                      <a 
                        href={`/blog/${post.slug}`}
                        class="inline-flex items-center gap-2 text-cyan-400 hover:text-cyan-300 transition-colors duration-200 group"
                      >
                        <span class="font-semibold">Read Article</span>
                        <svg class="w-5 h-5 group-hover:translate-x-1 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
                        </svg>
                      </a>
                    </div>
                  </div>
                </div>
              </div>
            ))}
          </div>
        </div>

        <!-- Slider Navigation -->
        <div class="flex justify-center mt-8 gap-3">
          {posts.map((_, index) => (
            <button 
              class={`slider-dot w-3 h-3 rounded-full border-2 transition-all duration-300 ${
                index === 0 ? 'bg-cyan-500 border-cyan-500' : 'border-gray-600 hover:border-gray-400'
              }`}
              data-index={index}
            ></button>
          ))}
        </div>

        <!-- Navigation Arrows -->
        <button class="slider-nav prev absolute left-4 top-1/2 -translate-y-1/2 w-12 h-12 bg-gray-800/80 backdrop-blur-sm border border-gray-600 rounded-full flex items-center justify-center text-white hover:bg-gray-700/80 transition-colors duration-200">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
          </svg>
        </button>
        
        <button class="slider-nav next absolute right-4 top-1/2 -translate-y-1/2 w-12 h-12 bg-gray-800/80 backdrop-blur-sm border border-gray-600 rounded-full flex items-center justify-center text-white hover:bg-gray-700/80 transition-colors duration-200">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
          </svg>
        </button>
      </div>
    </div>
  </section>
</BaseLayout>

<style>
  /* Animations */
  @keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-20px); }
  }

  @keyframes floatAlt {
    0%, 100% { transform: translateY(0px) rotate(0deg); }
    50% { transform: translateY(-15px) rotate(180deg); }
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes fadeInRight {
    from {
      opacity: 0;
      transform: translateX(30px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  /* Floating shapes */
  .floating-shape {
    animation: float 6s ease-in-out infinite;
  }

  .shape-1 { top: 20%; left: 10%; animation-delay: 0s; }
  .shape-2 { top: 60%; left: 80%; animation-delay: 1s; animation-name: floatAlt; }
  .shape-3 { top: 30%; left: 70%; animation-delay: 2s; }
  .shape-4 { top: 80%; left: 20%; animation-delay: 3s; animation-name: floatAlt; }
  .shape-5 { top: 10%; left: 90%; animation-delay: 4s; }

  /* Fade in animations */
  .fade-in-up {
    animation: fadeInUp 1s ease-out forwards;
  }

  .fade-in-right {
    animation: fadeInRight 1s ease-out 0.3s forwards;
    opacity: 0;
  }

  /* Button styles */
  .cyber-button-primary {
    @apply relative inline-flex items-center px-8 py-4 bg-gradient-to-r from-cyan-500 to-blue-600 
           text-white font-semibold rounded-lg overflow-hidden transition-all duration-300
           hover:shadow-lg hover:shadow-cyan-500/25 hover:scale-105;
  }

  .cyber-button-secondary {
    @apply inline-flex items-center px-8 py-4 bg-gray-800 border border-gray-600 
           text-gray-300 font-semibold rounded-lg transition-all duration-300
           hover:bg-gray-700 hover:border-gray-500 hover:text-white;
  }

  .cyber-button-outline {
    @apply inline-flex items-center px-8 py-4 border-2 border-cyan-500 
           text-cyan-400 font-semibold rounded-lg transition-all duration-300
           hover:bg-cyan-500 hover:text-white;
  }

  /* Tech badges */
  .tech-badge {
    @apply px-3 py-1 bg-gray-800 border border-gray-600 text-gray-300 text-sm rounded-full
           transition-all duration-300 hover:border-cyan-500 hover:text-cyan-400;
  }

  /* Blog slider styles */
  .blog-slider {
    position: relative;
  }

  .blog-slides {
    will-change: transform;
  }

  .slider-dot.active {
    @apply bg-cyan-500 border-cyan-500;
  }

  /* Responsive adjustments */
  @media (max-width: 1024px) {
    .floating-shape {
      display: none;
    }
  }

  /* Line clamp utilities */
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>

<script>
  // Blog Slider Functionality
  function initBlogSlider() {
    let currentSlide = 0;
    const slides = document.querySelectorAll('.blog-slide');
    const dots = document.querySelectorAll('.slider-dot');
    const slidesContainer = document.querySelector('.blog-slides');
    const prevBtn = document.querySelector('.slider-nav.prev');
    const nextBtn = document.querySelector('.slider-nav.next');
    let autoSlideInterval;

    function goToSlide(index) {
      currentSlide = index;
      updateSlider();
    }

    function nextSlide() {
      currentSlide = (currentSlide + 1) % slides.length;
      updateSlider();
    }

    function prevSlide() {
      currentSlide = (currentSlide - 1 + slides.length) % slides.length;
      updateSlider();
    }

    function updateSlider() {
      // Update slides position
      if (slidesContainer) {
        (slidesContainer as HTMLElement).style.transform = `translateX(-${currentSlide * 100}%)`;
      }

      // Update dots
      dots.forEach((dot, index) => {
        dot.classList.toggle('active', index === currentSlide);
        if (index === currentSlide) {
          dot.classList.add('bg-cyan-500', 'border-cyan-500');
          dot.classList.remove('border-gray-600');
        } else {
          dot.classList.remove('bg-cyan-500', 'border-cyan-500');
          dot.classList.add('border-gray-600');
        }
      });
    }

    function startAutoSlide() {
      autoSlideInterval = setInterval(() => {
        nextSlide();
      }, 5000);
    }

    function stopAutoSlide() {
      if (autoSlideInterval) {
        clearInterval(autoSlideInterval);
      }
    }

    // Initialize
    if (slides.length > 0) {
      // Add event listeners
      prevBtn?.addEventListener('click', prevSlide);
      nextBtn?.addEventListener('click', nextSlide);
      
      dots.forEach((dot, index) => {
        dot.addEventListener('click', () => goToSlide(index));
      });

      // Auto-advance slides
      startAutoSlide();
      
      // Pause on hover
      slidesContainer?.addEventListener('mouseenter', stopAutoSlide);
      slidesContainer?.addEventListener('mouseleave', startAutoSlide);

      // Initialize first state
      updateSlider();
    }
  }

  // Initialize slider when page loads
  document.addEventListener('DOMContentLoaded', initBlogSlider);

  // Re-initialize on page transitions
  document.addEventListener('astro:page-load', initBlogSlider);
</script>
