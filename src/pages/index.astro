---
import BaseLayout from "../layouts/BaseLayout.astro";
import AboutMe from "../components/sections/AboutMe.astro";
import TypeWriter from "../components/TypeWriter.astro";
import profileImage from "../assets/chad_profile.jpg";
import { getCollection } from "astro:content";
import BlogSlider from "../components/BlogSlider.astro";
import Icon from "../components/Icon.astro";
import { buttonVariants } from "@/components/ui/button";
import { ModeToggle } from "@/components/ModeToggle";
import { Image } from "astro:assets";
import ProfileImage from "@/components/ProfileImage.astro";
import { Separator } from "@/components/ui/separator";
import HorizontalCard from "@/components/HorizontalCard.astro";
const posts = (await getCollection("blog")).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);

const currentYear = new Date().getFullYear();
const age = currentYear - 1989;
const grayscale = Math.min(age, 100);

const last_posts = posts;
---

<BaseLayout sideBarActiveItemID="home">
  <div class="flex flex-col items-center md:grid md:grid-cols-[1fr_minmax(330px,_700px)_minmax(300px,_600px)_2fr] gap-4 mt-6 md:mt-10 pb-10">
    <!-- Mobile Header Section -->
    <div class="w-full max-w-sm flex flex-col items-center space-y-4 md:hidden">
      <h1 class="text-3xl font-bold">Chad Gauthier</h1>
      <ProfileImage
          profileImage={profileImage}
          altText="closeup of Chad Gauthier in a Japanese park"
          class="w-32 h-32"
        />
      <div class="w-full grid grid-cols-2 gap-2 mt-4">
        <a
          class={buttonVariants({ size: "default", variant: "default", class: "w-full" })}
          href="https://www.linkedin.com/in/chadgauth/"
          target="_blank">
          <Icon name="linkedin" class="mr-2 h-4 w-4" />
          LinkedIn
        </a>
        <a
          class={buttonVariants({ size: "default", variant: "outline", class: "w-full" })}
          href="https://github.com/chadgauth/portfolio"
          target="_blank">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2 h-4 w-4">
            <path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"/>
          </svg>
          Source
        </a>
        <a
          class={buttonVariants({ size: "default", variant: "outline", class: "w-full" })}
          href="/cv">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2 h-4 w-4">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
            <polyline points="14 2 14 8 20 8"/>
            <line x1="16" y1="13" x2="8" y2="13"/>
            <line x1="16" y1="17" x2="8" y2="17"/>
            <line x1="10" y1="9" x2="8" y2="9"/>
          </svg>
          View CV
        </a>
        <a
          class={buttonVariants({ size: "default", variant: "secondary", class: "w-full" })}
          href="/chad-gauthier.vcf"
          download>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2 h-4 w-4">
            <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/>
            <circle cx="9" cy="7" r="4"/>
            <line x1="19" y1="8" x2="19" y2="14"/>
            <line x1="22" y1="11" x2="16" y2="11"/>
          </svg>
          Add Contact
        </a>
      </div>
    </div>

    <!-- Desktop Layout -->
    <div class="hidden md:block md:col-span-1 md:col-start-2 pt-4 md:pt-0">
      <h1 class="text-5xl font-bold">Chad Gauthier</h1>
    </div>
    <div class="hidden md:block md:row-start-3 md:col-start-3 md:col-end-4">
      <ProfileImage
        profileImage={profileImage}
        altText="closeup of Chad Gauthier in a Japanese park"
      />
    </div>

    <!-- Common Content -->
    <AboutMe className="w-full max-w-2xl mx-auto md:row-start-3 md:col-start-2 md:col-end-3" />
    <TypeWriter className="hidden md:block md:col-start-2 md:col-span-2 md:row-start-2 pl-3" />
</BaseLayout>

<style>
  @media (max-width: 768px) {
    .profile-picture {
      width: 128px;
      height: 128px;
    }
  }
</style>
        </div>
      </div>
      <!-- <div class="flex justify-center align-middle pt-10 md:row-start-5 md:col-start-2 md:col-span-3 lg:col-start-3 sm:pl-0 md:max-w-xl xl:pl-20">
        <BlogSlider last_posts={last_posts} />
      </div> -->
  </div>
  
  
  <!-- <div class="border-primary-800 flex-grow">
    <div class="p-5 pt-1 lg:max-w-[1024px] max-w-[100vw] mx-auto px-5"></div>
    <div class="lg:max-w-[900px] max-w-[100vw] mx-auto">
      {
    last_posts.map((post, index) => (
      <>
        <HorizontalCard
          title={post.data.title}
          subtitle={post.data.subtitle}
          img={post.data.heroImage}
          desc={post.data.description}
          url={"/blog/" + post.slug}
          target="_self"
          badge={post.data.badge}
        />
        {index < last_posts.length - 1 && <div class="divider my-0" />}
      </>
    ))
  }
    </div>
  </div> -->
</BaseLayout>

<style>
  /* :root {
  --bg: theme('colors.primary.DEFAULT');
  --clr-1: theme('colors.text.200');
  --clr-2: theme('colors.accent.300');
  --clr-3: theme('colors.primary.200');
  --clr-4: theme('colors.background.300');

  --blur: .75rem;
} */

  .glow {
    filter: drop-shadow(0 0 75px lch(var(--accent-700) / 0.25));
  }

  .image-container {
    position: relative;
    overflow: hidden;
  }

  .image-container::before {
    width: 100%;
    height: 100%;
    background-color: hsl(
      129,
      37%,
      33%
    ); /* Change this to your desired color */
    opacity: 1;
    transition:
      opacity 0.3s ease,
      filter 0.3s ease;
  }

  .image-container:hover::before {
    opacity: 0;
  }

  .profile-image {
    overflow: hidden;
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
    opacity: 0.89;
    transition: all 0.3s ease;
  }

  .typewrite {
    min-height: 3.4em;
  }

  @media (max-width: 768px) {
    .profile-image {
      object-position: left;
    }
  }

  @media (min-width: 768px) {
    .typewrite {
      min-height: 1.6em;
      padding-top: 0.2em;
    }
  }

  .image-container:hover .profile-image {
    filter: grayscale(0) !important;
    opacity: 1;
  }

  .title {
    position: relative;
    overflow: hidden;
    background: var(--bg);
    margin: 0;
  }

  .aurora {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 2;
    mix-blend-mode: darken;
    pointer-events: none;
  }

  .aurora__item {
    overflow: hidden;
    position: absolute;
    width: 340px;
    height: 100px;
    background-color: var(--clr-1);
    border-radius: 37% 29% 27% 27% / 28% 25% 41% 37%;
    filter: blur(var(--blur));
    mix-blend-mode: overlay;
  }

  .aurora__item:nth-of-type(1) {
    top: -50%;
    animation:
      aurora-border 6s ease-in-out infinite,
      aurora-1 12s ease-in-out infinite alternate;
  }

  .aurora__item:nth-of-type(2) {
    background-color: var(--clr-3);
    right: 0;
    top: 0;
    animation:
      aurora-border 6s ease-in-out infinite,
      aurora-2 12s ease-in-out infinite alternate;
  }

  .aurora__item:nth-of-type(3) {
    background-color: var(--clr-2);
    left: 0;
    bottom: 0;
    animation:
      aurora-border 6s ease-in-out infinite,
      aurora-3 8s ease-in-out infinite alternate;
  }

  .aurora__item:nth-of-type(4) {
    background-color: var(--clr-4);
    right: 0;
    bottom: -50%;
    animation:
      aurora-border 6s ease-in-out infinite,
      aurora-4 24s ease-in-out infinite alternate;
  }

  /* For the text content */
  .about-me-content {
    position: relative; /* Ensure the text is above the pseudo-elements */
    z-index: 1;
  }

  @keyframes aurora-1 {
    0% {
      top: 0;
      right: 0;
    }

    50% {
      top: 100%;
      right: 75%;
    }

    75% {
      top: 100%;
      right: 25%;
    }

    100% {
      top: 0;
      right: 0;
    }
  }

  @keyframes aurora-2 {
    0% {
      top: -50%;
      left: 0%;
    }

    60% {
      top: 100%;
      left: 75%;
    }

    85% {
      top: 100%;
      left: 25%;
    }

    100% {
      top: -50%;
      left: 0%;
    }
  }

  @keyframes aurora-3 {
    0% {
      bottom: 0;
      left: 0;
    }

    40% {
      bottom: 100%;
      left: 75%;
    }

    65% {
      bottom: 40%;
      left: 50%;
    }

    100% {
      bottom: 0;
      left: 0;
    }
  }

  @keyframes aurora-4 {
    0% {
      bottom: -50%;
      right: 0;
    }

    50% {
      bottom: 0%;
      right: 40%;
    }

    90% {
      bottom: 50%;
      right: 25%;
    }

    100% {
      bottom: -50%;
      right: 0;
    }
  }

  @keyframes aurora-border {
    0% {
      border-radius: 37% 29% 27% 27% / 28% 25% 41% 37%;
    }

    25% {
      border-radius: 47% 29% 39% 49% / 61% 19% 66% 26%;
    }

    50% {
      border-radius: 57% 23% 47% 72% / 63% 17% 66% 33%;
    }

    75% {
      border-radius: 28% 49% 29% 100% / 93% 20% 64% 25%;
    }

    100% {
      border-radius: 37% 29% 27% 27% / 28% 25% 41% 37%;
    }
  }
</style>

<script>
  function sendEmail() {
    console.log("email");
    var user = "chadgauth";
    var domain = "gmail.com";
    window.location.href = "mailto:" + user + "@" + domain;
  }
</script>
